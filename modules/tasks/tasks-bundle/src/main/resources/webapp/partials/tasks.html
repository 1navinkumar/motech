
<!------------------------  Tasks  ------------------------------------->
<div class="row-fluid span8">
    <a href="#/task/new" type="button" class="btn btn-success pull-right margin-before2"><i class="icon icon-plus icon-white"></i> {{msg('task.new')}}</a>
    <h3>{{msg('header.tasks')}}</h3>
</div>
<div class="clearfix"></div><div class="margin-after2 top-line"></div>


<div class="row-fluid">
    <div class="span8">
        <h4 ng-show="activeTasks.length != 0">{{msg('header.activeTasks')}}</h4>
        <div ng-repeat="item in activeTasks">
            <div class="task-content clearfix">
                <div class="task-header">{{get(item.task.trigger, 'displayName')}} - {{get(item.task.action, 'displayName')}}</div>
                <div class="task-bar">
                    <ul class="task-nav">
                        <li class="task-panel">
                            <div><img ng-src="../tasks/api/channel/icon?moduleName={{get(item.task.trigger, 'moduleName')}}&moduleVersion={{get(item.task.trigger, 'moduleVersion')}}" class="panel-img"/></div>
                            <span>{{get(item.task.trigger, 'displayName')}}</span>
                        </li>
                        <li>
                            <div><img src="../tasks/img/arrow.png" class="imgArrow"/></div>
                        </li>
                        <li class="task-panel">
                            <div><img ng-src="../tasks/api/channel/icon?moduleName={{get(item.task.action, 'moduleName')}}&moduleVersion={{get(item.task.action, 'moduleVersion')}}" class="panel-img"/></div>
                            <span>{{get(item.task.action, 'displayName')}}</span>
                        </li>
                    </ul>
                    <div class="">
                        <a href="#/task/{{item.task._id}}/edit" type="button" class="btn btn-primary"><i class="icon icon-edit icon-white"></i>
                            {{msg('button.edit')}}
                        </a>
                        <button type="button" class="btn btn-primary"><i class="icon icon-pause icon-white"></i>
                            {{msg('button.pause')}}
                        </button>
                        <button ng-click="deleteTask(item)" type="button" class="btn btn-danger"><i class="icon icon-trash icon-white"></i>
                            {{msg('button.delete')}}
                        </button>
                        <button type="button" class="btn btn-primary"><i class="icon icon-time icon-white"></i>
                            {{msg('button.history')}}
                        </button>
                    </div>
                    <ul class="task-list">
                        <li class="info"><i class="icon icon-share icon-blue"></i> {{msg('info.executedTimes', item.success.length)}}</li>
                        <li class="error" ng-hide="item.error.length == 0"><i class="icon icon-exclamation-sign icon-red"></i> {{msg('info.errorsLastDays', item.error.length)}}</li>
                        <li class="success" ng-show="item.error.length == 0"><i class="icon icon-ok-sign icon-green"></i> {{msg('info.errorsLastDays', item.error.length)}}</li>
                    </ul>
                </div>
                <div class="clearfix"></div>
                <div class="task-footer">{{item.task.description}}</div>
            </div>

            <div class="clearfix"></div>
            <div class="margin-after2"></div>
        </div>


        <h4 ng-show="pausedTasks.length != 0">{{msg('header.pausedTasks')}}</h4>
        <div ng-repeat="item in pausedTasks">
            <div class="task-content clearfix">
                <div class="task-header">{{get(item.task.trigger, 'displayName')}} - {{get(item.task.action, 'displayName')}}</div>
                <div class="task-bar">
                    <ul class="task-nav">
                        <li class="task-panel">
                            <div><img ng-src="../tasks/api/channel/icon?moduleName={{get(item.task.trigger, 'moduleName')}}&moduleVersion={{get(item.task.trigger, 'moduleVersion')}}" class="panel-img"/></div>
                            <span>{{get(item.task.trigger, 'displayName')}}</span>
                        </li>
                        <li>
                            <div><img src="../tasks/img/arrow.png" class="imgArrow"/></div>
                        </li>
                        <li class="task-panel">
                            <div><img ng-src="../tasks/api/channel/icon?moduleName={{get(item.task.action, 'moduleName')}}&moduleVersion={{get(item.task.action, 'moduleVersion')}}" class="panel-img"/></div>
                            <span>{{get(item.task.action, 'displayName')}}</span>
                        </li>
                    </ul>
                    <div class="">
                        <a href="#/task/{{item.task._id}}/edit" type="button" class="btn btn-primary"><i class="icon icon-edit icon-white"></i>
                            {{msg('button.edit')}}
                        </a>
                        <button type="button" class="btn btn-primary"><i class="icon icon-play icon-white"></i>
                            {{msg('button.resume')}}
                        </button>
                        <button ng-click="deleteTask(item)" type="button" class="btn btn-danger"><i class="icon icon-trash icon-white"></i>
                            {{msg('button.delete')}}
                        </button>
                        <button type="button" class="btn btn-primary"><i class="icon icon-time icon-white"></i>
                            {{msg('button.history')}}
                        </button>
                    </div>
                    <ul class="task-list">
                        <li class="info"><i class="icon icon-share icon-blue"></i> {{msg('info.executedTimes', item.success.length)}}</li>
                        <li class="error" ng-hide="item.error.length == 0"><i class="icon icon-exclamation-sign icon-red"></i> {{msg('info.errorsLastDays', item.error.length)}}</li>
                        <li class="success" ng-show="item.error.length == 0"><i class="icon icon-ok-sign icon-green"></i> {{msg('info.errorsLastDays', item.error.length)}}</li>
                    </ul>
                </div>
                <div class="clearfix"></div>
                <div class="task-footer">{{task.description}}</div>
            </div>

            <div class="clearfix"></div>
            <div class="margin-after2"></div>
        </div>
    </div>
    <div class="span4">
        <div class="margin-after2">
            <div class="box-header">{{msg('header.recentTaskActivity')}}</div>
            <div class="box-content clearfix">
                <table class="table table-striped table-lightblue table-recent-activity">
                    <thead></thead>
                    <tbody>
                    <tr>
                        <td><div><img src="../tasks/img/adherence.png"  class="recent-activity-img" /></div>
                        </td>
                        <td><div><img src="../tasks/img/arrow.png" class="recent-activity-arrow"/></div></td>
                        <td><div><img src="../tasks/img/sms.png" class="recent-activity-img" /></div></td>
                        <td>20 min. ago</td>
                        <td class=""><div><img src="../tasks/img/icon-ok.png" class="recent-activity-arrow"/></div></td>
                    </tr>
                    <tr>
                        <td><div><img src="../tasks/img/appointments.png" class="recent-activity-img" /></div></td>
                        <td><div><img src="../tasks/img/arrow.png" class="recent-activity-arrow" /></div></td>
                        <td><div><img src="../tasks/img/sms.png" class="recent-activity-img" /></div></td>
                        <td>20 min. ago</td>
                        <td class="" ui-jq="tooltip" ui-options="{placement:'left'}" data-original-title="{{msg('click to see error details')}}">
                            <div><img src="../tasks/img/icon-exclamation.png" class="recent-activity-arrow"/></div>
                        </td>
                    </tr>
                    <tr>
                        <td><div><img src="../tasks/img/adherence.png"  class="recent-activity-img" /></div></td>
                        <td><div><img src="../tasks/img/arrow.png" class="recent-activity-arrow"/></div></td>
                        <td><div><img src="../tasks/img/sms.png" class="recent-activity-img" /></div></td>
                        <td>20 min. ago</td>
                        <td><div><img src="../tasks/img/icon-info.png" class="recent-activity-arrow"/></div></td>
                    </tr>
                    <tr>
                        <td><div><img src="../tasks/img/mrs.png"  class="recent-activity-img" /></div></td>
                        <td><div><img src="../tasks/img/arrow.png" class="recent-activity-arrow"/></div></td>
                        <td><div><img src="../tasks/img/sms.png" class="recent-activity-img" /></div></td>
                        <td>20 min. ago</td>
                        <td><div><img src="../tasks/img/icon-question.png" class="recent-activity-arrow"/></div></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

