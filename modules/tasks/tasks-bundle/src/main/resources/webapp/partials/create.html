<!------------------------  Create Task  ------------------------------------->
<div class="">
    <h3>{{msg('header.newTask')}}</h3>
</div>
<div class=" outside-tb2 top-line"></div>
<div class="box-header">{{msg('section.newTask')}}</div>
<div class="box-content well3">
    <h3 class="pagination-centered">{{msg('section.selectEvents')}}</h3>
    <div class="section-input">
        <div class="panel-input" ui-jq="tooltip" ui-options="{placement:'left'}" data-original-title="{{msg('help.doubleClickToEdit')}}">
            <ul class="trigger droppable" droppable>
                <li class="task-panel dragged" ng-show="draggedTrigger" draggable>
                    <div><img ng-src="../tasks/api/channel/icon?moduleName={{draggedTrigger.module}}&moduleVersion={{draggedTrigger.version}}" class="panel-img"/></div>
                    <span>{{draggedTrigger.display}}</span>
                    <div ng-hide="selectedTrigger">
                        <div>{{msg('tooltip.selectTrigger')}}</div>
                        <ul>
                            <li ng-repeat="t in draggedTrigger.events">
                                <a ng-click="selectTaskEvent('trigger', t)">{{t.displayName}}</a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
            <span class="instructions" ng-hide="draggedTrigger">{{msg('info.dragTrigger')}}</span>
        </div>
        <div class="to imgArrow"><img src="../tasks/img/arrow.png"/></div>
        <div class="panel-input" ui-jq="tooltip" ui-options="{placement:'right'}" data-original-title="{{msg('help.dragChannelFromListBelow')}}">
            <ul class="action droppable" droppable>
                <li class="task-panel dragged" ng-show="draggedAction" draggable>
                    <div><img ng-src="../tasks/api/channel/icon?moduleName={{draggedAction.module}}&moduleVersion={{draggedAction.version}}" class="panel-img"/></div>
                    <span>{{draggedAction.display}}</span>
                    <div ng-hide="selectedAction">
                        <div>{{msg('tooltip.selectAction')}}</div>
                        <ul>
                            <li ng-repeat="a in draggedAction.events">
                                <a ng-click="selectTaskEvent('action', a)">{{a.displayName}}</a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
            <span class="instructions" ng-hide="draggedAction">{{msg('info.dragAction')}}</span>
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="clearfix"></div><div class="margin-before4"></div>
    <div class="section-source" ng-hide="task.trigger && task.action">
        <div data-left-arrow="true" class="left-arrow">
            <img src="../tasks/img/larrow.png"/>
        </div>
        <ul class="task-selector droppable" style="position: relative;" droppable>
            <li class="task-panel" ng-repeat="channel in channels" draggable data-channel-name="{{channel.displayName}}" data-module-name="{{channel.moduleName}}" data-module-version="{{channel.moduleVersion}}">
                <div><img ng-src="../tasks/api/channel/icon?moduleName={{channel.moduleName}}&moduleVersion={{channel.moduleVersion}}" class="panel-img" /></div>
                <span>{{channel.displayName}}</span>
                <div>
                    <div>{{msg('tooltip.availableTriggers')}}</div>
                    <ul>
                        <li ng-repeat="trigger in channel.triggerTaskEvents">{{trigger.displayName}}</li>
                    </ul>
                    <div>{{msg('tooltip.availableActions')}}</div>
                    <ul>
                        <li ng-repeat="action in channel.actionTaskEvents">{{action.displayName}}</li>
                    </ul>
                </div>
            </li>
        </ul>
        <div data-right-arrow="true" class="right-arrow">
            <img src="../tasks/img/rarrow.png"/>
        </div>
        <div class="clearfix"></div>
    </div>
</div>
<div class="margin-after4"></div>
<div ng-show="task.trigger && task.action">
    <!------------------------  Build Task  ------------------------------------->
    <div class="well2 container-fluid margin-center">
        <div class="box-header">{{msg('section.buildAction')}}</div>
        <div class="box-content clearfix"><h3 class="pagination-centered">{{msg('section.buildAction')}}</h3>
            <div class="row-fluid">
                <div class="span6 inside">
                    <div class="well3">
                        <div class="right-divider">
                            <form class="inside form-horizontal">
                                <div class="control-group">
                                    <h4>{{selectedTrigger.displayName}}</h4>
                                    <p>{{msg('info.dragFieldBuildAction')}}</p>
                                </div>
                                <div class="control-group">
                                    <span class="badge badge-info triggerField" draggable ng-repeat="i in selectedTrigger.eventParameters" data-index="{{$index}}">{{i.displayName}}</span>
                                </div>
                                <div class="control-group">
                                    <h5>{{msg('subsection.IncludeAdditionalData')}}</h5>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Source </label>
                                    <div class="controls">
                                        <div class="btn-group">
                                            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                                                MRS
                                                <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a><i></i> 1</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Object </label>
                                    <div class="controls">
                                        <div class="btn-group">
                                            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                                                Patient
                                                <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a><i></i> 1</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Lookup by </label>
                                    <div class="controls">
                                        <div class="btn-group">
                                            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                                                ExternalID
                                                <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a><i></i> 1</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <p><strong>Object Fields</strong></p>

                                    <span class="badge badge-important">FullName</span>
                                    <span class="badge badge-important">Gander</span>
                                    <span class="badge badge-important">DOB</span>
                                    <span class="badge badge-important">PhoneNumber</span>

                                </div>
                                <div class="control-group">
                                    <label class="control-label">Object </label>
                                    <div class="controls">
                                        <div class="btn-group">
                                            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                                                Facility
                                                <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a><i></i> 1</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Lookup by </label>
                                    <div class="controls">
                                        <div class="btn-group">
                                            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                                                FacilityID
                                                <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a><i></i> 1</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <p><strong>Object Fields</strong></p>

                                    <span class="badge badge-warning">FacilityName</span>
                                    <span class="badge badge-warning">Address</span>
                                </div>
                                <div class="control-group">
                                    <button class="btn btn-primary"><i class="icon icon-plus"></i> Choose Another MRS Object</button>
                                    <div class="control-group">
                                    </div>
                                    <button class="btn btn-warning"><i class="icon icon-plus"></i> Choose Another Data Source</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="span6">
                    <div class="well3">
                        <div class="">
                            <form class="inside">
                                <div class="control-group">
                                    <h4>{{selectedAction.displayName}}</h4>
                                </div>
                                <div class="control-group" ng-show="selectedAction.description">
                                    <label>{{selectedAction.description}}</label>
                                </div>
                                <div class="control-group" ng-repeat="i in selectedAction.eventParameters">
                                    <label>{{i.displayName}}</label>
                                    <textarea ng-model="i.value" droppable class="actionField" data-index="{{$index}}"></textarea>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!------------------------  filter ------------------------------------->

    <h3 class="pagination-centered">{{msg('section.filters')}}</h3>
    <div class="pagination-centered">
        <p>This step is optional. You can create filters to decide which new Appointments trigger new SMS messages.</p>
        <p><strong>Only run this Task if:</strong></p>
        <form class="form-inline">
            <label><i class="icon icon-plus"></i> If appointment</label>
            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                    Start Date
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a><i></i> date1</a></li>
                </ul>
            </div>
            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                    Is
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a><i></i> date1</a></li>
                </ul>
            </div>
            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                    &gt;
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a><i></i> date1</a></li>
                </ul>
            </div>
            <input type="text" value="10/6/2012"/>
        </form>
    </div>
    <!------------------------  description ------------------------------------->
    <h3 class="pagination-centered">{{msg('section.taskDescription')}}</h3>
    <div class="pagination-centered">
        <p>{{msg('info.taskDescription')}}</p>
        <textarea ng-model="task.description"></textarea>
    </div>
    <!------------------------  save ------------------------------------->
    <h3 class="pagination-centered">{{msg('section.save')}}</h3>
    <div class="pagination-centered">
        <p>{{msg('info.save')}}</p>
        <a ng-click="save(true)" class="btn btn-primary">Save & Enabled</a>
        <a ng-click="save(false)" class="btn">Save</a>
    </div>
</div>
