<div class="accordion" id="data-source-{{data.id}}" overflow-change>
    <div class="task-group">
        <div class="accordion-heading">
            <div class="pull-right">
                <button ng-click="removeData(data)" class="btn btn-danger btn-in-heading" data-toggle="collapse">
                    <i class="icon-remove icon-white"></i>
                </button>
            </div>
            <a class="accordion-toggle inbox-header" data-toggle="collapse" data-parent="#data-source-{{data.id}}" href="#collapse-data-source-{{data.id}}">
                {{msg('subsection.data')}}
                <span ng-hide="!data.displayName">
                    &raquo; {{msg(data.dataSourceName)}} : {{msg(data.displayName)}}
                </span>
                <span ng-hide="!data.lookup.field">
                    {{msg('by')}} {{msg(data.lookup.field)}}
                </span>
            </a>
        </div>
        <div id="collapse-data-source-{{data.id}}" class="accordion-body stripes-bg collapse in overflowChange" style="overflow: visible;">
            <div class="accordion-inner">
                <h4>{{msg('info.availableFields')}}:</h4>
                <div class="control-group move-element">
                    <span contenteditable="false" ng-repeat="i in selectedTrigger.eventParameters" class="badge badge-info triggerField" draggable data-prefix="trigger" data-index="{{$index}}" data-type="{{i.type}}">{{msg(i.displayName)}}</span>​
                </div>
                <div class="control-group">
                    <span>{{msg('subsubsection.source')}}:</span>
                    <div class="btn-group">
                        <button class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                            {{msg(data.dataSourceName || 'select')}}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li ng-repeat="dataSource in dataSources">
                                <a ng-click="selectDataSource(data, dataSource)">{{msg(dataSource.name)}}</a>
                            </li>
                        </ul>
                    </div>
                    <span>{{msg('subsubsection.object')}}:</span>
                    <div class="btn-group">
                        <button class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                            {{msg(data.displayName || 'select')}}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li ng-repeat="object in findDataSourceById(dataSources, data.dataSourceId).objects">
                                <a ng-click="selectObject(data, object)">{{msg(object.displayName)}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="control-group" ui-if="data.displayName">
                    <span>{{msg('subsubsection.lookup')}}:</span>
                    <div class="btn-group">
                        <button class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                            {{msg(data.lookup.field || 'select')}}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li ng-repeat="lookup in findObject(data.dataSourceId, data.type).lookupFields">
                                <a ng-click="selectLookup(data, lookup)">{{msg(lookup)}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="control-group" ui-if="data.displayName">
                    <span>{{msg('subsubsection.failIfDataNotFound')}}</span>
                    <div class="controls">
                        <div class="btn-group">
                            <input type="checkbox" ng-model="data.failIfDataNotFound"/>
                        </div>
                    </div>
                </div>
                <div ui-if="data.lookup.field">
                    <div class="control-group" ng-class="{error: actionCssClass(data.lookup)}" class="control-group form-inline clearfix">
                        <label>{{msg(data.lookup.field)}}</label>

                        <!------------------------ Chrome & IE ------------------------>
                        <div ui-if="BrowserDetect.browser=='Chrome' || BrowserDetect.browser=='Explorer'" class="controls">
                            <editable-content data="data.lookup" index="$index" type="UNICODE"></editable-content>
                        </div>

                        <!------------------------ Other browsers  ------------------------>
                        <div ui-if="BrowserDetect.browser!='Chrome' && BrowserDetect.browser!='Explorer'" class="controls">
                            <input type="text" ng-model="data.lookup.by" droppable class="actionField span8" data-index="{{$index}}" data-type="{{i.type}}"/>
                        </div>
                    </div>
                </div>
                <div class="control-group move-element margin-before2" ng-hide="data.displayName == undefined">
                    <p><strong>{{msg('subsubsection.objectFields')}}</strong></p>
                    <span ng-repeat="field in findObject(data.dataSourceId, data.type).fields" class="badge badge-warning">{{msg(field.displayName)}}</span>​
                </div>
                <a class="btn btn-success" data-toggle="collapse" data-target="#collapse-data-source-{{data.id}}">{{msg('done')}}</a>
            </div>
        </div>
    </div>
</div>